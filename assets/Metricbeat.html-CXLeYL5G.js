import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as t,c as i,a as o}from"./app-BqYb0twT.js";const c="/blog/assets/images/LinuxService/img_15.png",a="/blog/assets/images/LinuxService/img_10.png",s="/blog/assets/images/LinuxService/img_11.png",n="/blog/assets/images/LinuxService/img_12.png",d="/blog/assets/images/LinuxService/img_13.png",r="/blog/assets/images/LinuxService/img_14.png",l={},m=o('<h1 id="metricbeat" tabindex="-1"><a class="header-anchor" href="#metricbeat"><span><code>Metricbeat</code></span></a></h1><h1 id="metricbeat安装" tabindex="-1"><a class="header-anchor" href="#metricbeat安装"><span><code>Metricbeat</code>安装</span></a></h1><ol><li>下载安装：<code>sudo apt install curl``---&gt;``curl -L -O https://artifacts.elastic.co/downloads/beats/metricbeat/metricbeat-8.11.1-linux-x86_64.tar.gz</code> <code>---</code>与<code>elasticsearch</code>版本一致</li><li>下载解压：<code>tar xzvf metricbeat-8.11.1-linux-x86_64.tar.gz</code></li><li>文件命名：<code>sudo mv metricbeat-8.11.1-linux-x86_64 metricbeat8111</code></li><li>删除压缩：<code>sudo rm -f metricbeat-8.11.1-linux-x86_64</code> <code>sudo rm -f sudo metricbeat-8.11.1-linux-x86_64.tar.gz</code></li><li>参考文章：<code>https://www.elastic.co/guide/en/beats/metricbeat/8.11/metricbeat-installation-configuration.html</code></li></ol><h1 id="基本配置" tabindex="-1"><a class="header-anchor" href="#基本配置"><span>基本配置</span></a></h1><ol><li>环境准备：<code>https://www.yuque.com/shenzaixijiezhizhong/gbygqg/fxx2ocpdhr7ad5xp#JPpeqXShell</code> 连接虚拟机小节</li><li>查看<code>IP</code>：终端输入<code>ipconfig</code>命令<code>---&gt;</code>无线局域网适配器<code>WLANIPV4</code>地址就是我们的<code>IP</code>地址<code>---</code>但是这个<code>IP</code>地址是会改变的<br><img src="'+c+`" alt="img.png" loading="lazy"></li><li>复制目录：将<code>elasticsearch8111config</code>目录下的<code>certs</code>目录复制到<code>metricbeat8111</code>目录下</li><li>重要配置：打开<code>metricbeat</code>的 <code>config</code> 目录中的<code>metricbeat.yml</code> 文件,做如下修改</li></ol><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>metricbeat.config.modules:
  # Glob pattern for configuration loading
  path: \${path.config}/modules.d/*.yml
  #设置 修改 metricbeat.yml 后，是否会自动装载 metricbeat.yml, 而不用重新启动 metricbea; true: 是
  # Set to true to enable config reloading
  reload.enabled: true
  
setup.kibana:
  host: &quot;192.168.1.100:5601&quot; 
  
output.elasticsearch:
  # Array of hosts to connect to.
  hosts: [&quot;192.168.1.100:9200&quot;]
  # Protocol - either \`http\` (default) or \`https\`.
  protocol: &quot;https&quot;
  # Authentication credentials - either API key or username/password.
  #api_key: &quot;id:api_key&quot;
  username: &quot;liu&quot;
  password: &quot;liuxiansheng&quot;
  ssl.certificate_authorities: [&quot;./certs/http_ca.crt&quot;] 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>配置测试：终端打开<code>metricbeat8111\`\`---&gt;</code>输入<code>./metricbeat test output</code><br><img src="`+a+'" alt="img.png" loading="lazy"></li><li>信息保护：终端打开<code>metricbeat8112``---&gt;``./metricbeat keystore create``---&gt;</code>输入<code>./metricbeat keystore add ES_USER</code> <code>---&gt;</code>输入<code>ES</code>账号的用户名<code>liu``---&gt;</code>输入<code>./metricbeat keystore add ES_PASSWORD``---&gt;</code>输入<code>ES</code>账号的密码<code>liuxiansheng``---&gt;</code>修改<code>metricbeat</code>的<code>config</code>目录中的<code>metricbeat.yml</code>文件为如下所示</li></ol><blockquote><p>补充说明：<code>./metricbeat keystore list</code>可以查看添加到<code>keystore</code>的变量</p></blockquote><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code>output.elasticsearch:\n  # Array of hosts to connect to.\n  hosts: [&quot;192.168.1.100:9200&quot;]\n  # Protocol - either `http` (default) or `https`.\n  protocol: &quot;https&quot;\n  # Authentication credentials - either API key or username/password.\n  #api_key: &quot;id:api_key&quot;\n  username: &quot;${ES_USER}&quot;\n  password: &quot;${ES_PASSWORD}&quot;\n  ssl.certificate_authorities: [&quot;./certs/http_ca.crt&quot;]\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h1 id="启动模块" tabindex="-1"><a class="header-anchor" href="#启动模块"><span>启动模块</span></a></h1><ol><li>查看启动：终端打开<code>metricbeat8114``---&gt;</code>输入<code>sudo ./metricbeat.exe modules list</code></li></ol><blockquote><p>补充说明：<code>system</code>模块是自启动的;<code>Enabled</code>启动/<code>Disabled</code>不启动</p></blockquote><ol start="2"><li>禁止模块：<code>sudo ./metricbeat modules disable system``---</code>禁止 <code>system</code> 模块</li><li>启动模块：<code>sudo ./metricbeat.exe modules enable nginx``---</code>启动<code>nginx</code> 模块</li></ol><h1 id="运行服务" tabindex="-1"><a class="header-anchor" href="#运行服务"><span>运行服务</span></a></h1><ol><li>数据准备：终端打开<code>metricbeat8111``---&gt;</code>输入<code>./metricbeat setup -e</code></li><li><code>kibana</code>设置：主机终端打开<code>kibana8111</code>目录下<code>kibana.yml``---&gt;</code>添加<code>server.host: &quot;0.0.0.0&quot;``----</code>不要在第一次运行之前添加该属性,不然展示链接有问题<br><img src="'+s+`" alt="img.png" loading="lazy"></li><li>启动<code>metricbeat</code>：终端打开<code>metricbeat8111\`\`---&gt;</code>依次输入下列命令<code>---</code>先启动<code>kibana</code></li></ol><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>   <span class="token function">sudo</span> <span class="token function">chown</span> root metricbeat.yml
   <span class="token function">sudo</span> <span class="token function">chown</span> root modules.d/nginx.yml
   <span class="token function">sudo</span> ./metricbeat <span class="token parameter variable">-e</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li><code>Kibana</code>查看模块：访问<code>http://localhost:5601/</code> <code>---&gt;</code>点击图标<code>---&gt;</code>点击<code>Dashboard</code><br><img src="`+n+'" alt="img.png" loading="lazy"><br><img src="'+d+'" alt="img.png" loading="lazy"></li><li><code>Kibana</code>查看模块：访问<code>http://localhost:5601/</code> <code>---&gt;</code>点击图标<code>---&gt;</code>点击<code>Discovery</code><br><img src="'+r+'" alt="img.png" loading="lazy"></li></ol>',17),u=[m];function g(b,p){return t(),i("div",null,u)}const x=e(l,[["render",g],["__file","Metricbeat.html.vue"]]),_=JSON.parse('{"path":"/LinuxService/Metricbeat.html","title":"Metricbeat","lang":"zh-CN","frontmatter":{"cover":"/assets/images/cover2.jpg","icon":"pen-to-square","date":"2024-06-30T00:00:00.000Z","category":["Metricbeat"],"tag":["红","圆"],"star":true,"sticky":true,"description":"Metricbeat Metricbeat安装 下载安装：sudo apt install curl``--->``curl -L -O https://artifacts.elastic.co/downloads/beats/metricbeat/metricbeat-8.11.1-linux-x86_64.tar.gz ---与elasticsea...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/blog/LinuxService/Metricbeat.html"}],["meta",{"property":"og:site_name","content":"柳衣白卿"}],["meta",{"property":"og:title","content":"Metricbeat"}],["meta",{"property":"og:description","content":"Metricbeat Metricbeat安装 下载安装：sudo apt install curl``--->``curl -L -O https://artifacts.elastic.co/downloads/beats/metricbeat/metricbeat-8.11.1-linux-x86_64.tar.gz ---与elasticsea..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://mister-hope.github.io/blog/assets/images/cover2.jpg"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-01T11:36:13.000Z"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://mister-hope.github.io/blog/assets/images/cover2.jpg"}],["meta",{"name":"twitter:image:alt","content":"Metricbeat"}],["meta",{"property":"article:author","content":"柳衣白卿"}],["meta",{"property":"article:tag","content":"红"}],["meta",{"property":"article:tag","content":"圆"}],["meta",{"property":"article:published_time","content":"2024-06-30T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-01T11:36:13.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Metricbeat\\",\\"image\\":[\\"https://mister-hope.github.io/blog/assets/images/LinuxService/img_15.png\\",\\"https://mister-hope.github.io/blog/assets/images/LinuxService/img_10.png\\",\\"https://mister-hope.github.io/blog/assets/images/LinuxService/img_11.png\\",\\"https://mister-hope.github.io/blog/assets/images/LinuxService/img_12.png\\",\\"https://mister-hope.github.io/blog/assets/images/LinuxService/img_13.png\\",\\"https://mister-hope.github.io/blog/assets/images/LinuxService/img_14.png\\"],\\"datePublished\\":\\"2024-06-30T00:00:00.000Z\\",\\"dateModified\\":\\"2024-07-01T11:36:13.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"柳衣白卿\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[],"git":{"createdTime":1719757937000,"updatedTime":1719833773000,"contributors":[{"name":"wadeKings","email":"worldkingscoding@gmail.com","commits":5}]},"readingTime":{"minutes":2.09,"words":628},"filePathRelative":"LinuxService/Metricbeat.md","localizedDate":"2024年6月30日","excerpt":"\\n<h1><code>Metricbeat</code>安装</h1>\\n<ol>\\n<li>下载安装：<code>sudo apt install curl``---&gt;``curl -L -O https://artifacts.elastic.co/downloads/beats/metricbeat/metricbeat-8.11.1-linux-x86_64.tar.gz</code> <code>---</code>与<code>elasticsearch</code>版本一致</li>\\n<li>下载解压：<code>tar xzvf metricbeat-8.11.1-linux-x86_64.tar.gz</code></li>\\n<li>文件命名：<code>sudo mv metricbeat-8.11.1-linux-x86_64 metricbeat8111</code></li>\\n<li>删除压缩：<code>sudo rm -f metricbeat-8.11.1-linux-x86_64</code> <code>sudo rm -f sudo metricbeat-8.11.1-linux-x86_64.tar.gz</code></li>\\n<li>参考文章：<code>https://www.elastic.co/guide/en/beats/metricbeat/8.11/metricbeat-installation-configuration.html</code></li>\\n</ol>","autoDesc":true}');export{x as comp,_ as data};
